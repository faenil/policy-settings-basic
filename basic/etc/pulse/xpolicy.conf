# -------- Group section -------------------------------------------------------

[group]
name   = idle
flags  = nopolicy
sink   = sink.null
source = sink.null.monitor

[group]
name   = background
flags  = limit_volume, cork_stream
sink   = sink.music
source = source.voice.raw

[group]
name   = systemsound
flags  = set_sink, limit_volume, cork_stream, mute_by_route
sink   = sink.voice.raw
source = sink.null.monitor

[group]
name   = feedbacksound
flags  = set_sink, limit_volume, cork_stream, mute_by_route
sink   = sink.voice.raw
source = sink.null.monitor

[group]
name   = inputsound
flags  = set_sink, limit_volume, cork_stream, mute_by_route
sink   = sink.voice.raw
source = sink.null.monitor

[group]
name   = event
flags  = set_sink, limit_volume, cork_stream, mute_by_route
sink   = sink.voice.raw
source = sink.null.monitor

[group]
name   = alarm
flags  = set_sink, limit_volume, cork_stream
sink   = sink.voice.raw
source = sink.null.monitor

[group]
name   = fmradio
flags  = set_sink, limit_volume, cork_stream, mute_by_route
sink   = sink.music
source = sink.null.monitor

[group]
name   = flash
flags  = limit_volume, cork_stream
sink   = sink.music
source = source.voice.raw

[group]
name   = player
flags  = limit_volume, cork_stream
sink   = sink.music
source = source.voice.raw

[group]
name   = game
flags  = set_sink, limit_volume, cork_stream
sink   = sink.voice.raw
source = source.voice.raw

[group]
name   = voiceui
flags  = set_sink, limit_volume, cork_stream
sink   = sink.voice.raw
source = sink.null.monitor

[group]
name   = ringtone
flags  = set_sink, limit_volume, mute_by_route
sink   = sink.music
source = source.null.monitor

[group]
name   = camera
flags  = set_sink, set_source, limit_volume, cork_stream
sink   = sink.voice.raw
source = source.record

[group]
name   = videoeditor
flags  = route_audio, limit_volume, cork_stream
sink   = sink.music
source = source.voice.raw

[group]
name   = ipcall
flags  = set_sink, set_source, limit_volume, cork_stream
sink   = sink.voice
source = source.voice

[group]
name   = call
flags  = set_sink, set_source
sink   = sink.voice
source = source.voice

[group]
name   = navigator
flags  = set_sink, set_source
sink   = sink.voice.raw
source = sink.null.monitor

[group]
name   = cstone
flags  = set_sink, set_source, limit_volume
sink   = sink.voice.raw
source = sink.null.monitor

[group]
name   = alwayson
flags  = set_sink, limit_volume, cork_stream
sink   = sink.voice.raw
source = sink.null.monitor

[group]
name   = nonsilent
flags  = set_sink, limit_volume, cork_stream
sink   = sink.voice.raw
source = sink.null.monitor

[group]
name   = internal
flags  = nopolicy
sink   = sink.null
source = source.null.monitor

[group]
name   = outgoing
flags  = route_audio
sink   = sink.hw0
source = sink.null.monitor

[group]
name   = incoming
flags  = route_audio
sink   = sink.null
source = source.hw0

# -------- Card section --------------------------------------------------------

[card]
type    = tvoutandbta2dp
name    = startswith:"bluez_card"
profile = a2dp
flags   = disable_notify


[card]
type    = bta2dp
name    = startswith:"bluez_card"
profile = a2dp

[card]
type    = tvoutandbthsp
name    = startswith:"bluez_card"
profile = hsp
flags   = disable_notify

[card]
type    = ihfandbthsp
name    = startswith:"bluez_card"
profile = hsp
flags   = disable_notify

[card]
type    = bthsp
name    = startswith:"bluez_card"
profile = hsp

[card]
type    = ihfandheadset
name    = equals:dac33
profile = passthrough

[card]
type    = ihfandheadphone
name    = equals:dac33
profile = passthrough

[card]
type    = headset
name    = equals:dac33
profile = normal

[card]
type    = headsetforcall
name    = equals:dac33
profile = passthrough

[card]
type    = headphone
name    = equals:dac33
profile = normal

[card]
type    = headphoneforcall
name    = equals:dac33
profile = passthrough

# [card]
# type    = headmike
# name    = equals:dac33
# profile = normal

[card]
type    = ihfandtvout
name    = equals:dac33
profile = passthrough

# [card]
# type    = tvout
# name    = 
# profile = 

# [card]
# type    = earpieceandtvout
# name    = 
# profile = 

[card]
type    = earpiece
name    = equals:dac33
profile = normal

# [card]
# type    = microphone
# name    = equals:dac33
# profile = normal

# [card]
# type    = ihfandfmtx
# name    = 
# profile = 

# [card]
# type    = fmtx
# name    = 
# profile = 

[card]
type    = ihf
name    = equals:dac33
profile = normal

# -------- Device section ------------------------------------------------------

# List of possible ports for convenience (to be removed soon)
# nokia-n950-dac33-output-headphone-call
# nokia-n950-dac33-output-headphone
# nokia-n950-twl4030-input-headset
# nokia-n950-twl4030-input-internal-microphones
# nokia-n950-twl4030-output-earpiece
# nokia-n950-twl4030-output-earpiece-nosidetone
# nokia-n950-twl4030-output-headset-call
# nokia-n950-twl4030-output-headset
# nokia-n950-twl4030-output-ihfandheadset
# nokia-n950-twl4030-output-ihf
# nokia-n950-wl1273-input-bt
# nokia-n950-wl1273-input-fmrx
# nokia-n950-wl1273-output-bt
# nokia-n950-wl1273-output-fmtx

[device]
type = tvoutandbta2dp
sink = name@startswith:"bluez_sink"
#ports = 

[device]
type = tvoutandbthsp
sink = equals:sink.hw1
#ports = 

[device]
type   = tvoutandbthsp
source = equals:source.hw1
#ports = 

[device]
type  = ihfandbthsp
sink  = equals:sink.hw0andhw1
ports = sink.hw0:nokia-n950-twl4030-output-ihf

[device]
type  = ihfandheadset
sink  = equals:sink.hw0
ports = sink.hw0:nokia-n950-twl4030-output-ihfandheadset

[device]
type  = ihfandheadphone
sink  = equals:sink.hw0
ports = sink.hw0:nokia-n950-twl4030-output-ihfandheadset

[device]
type  = bta2dp
sink  = name@startswith:"bluez_sink"
#ports = 
flags = disable_notify

[device]
type  = bthsp
sink  = equals:sink.hw1
#ports = 
flags = disable_notify

[device]
type   = bthsp
source = equals:source.hw1
#ports = 
flags  = disable_notify

[device]
type = headset
source = equals:source.hw0
ports = source.hw0:nokia-n950-twl4030-input-headset
flags = disable_notify

[device]
type  = headset
sink  = equals:sink.headphone
ports = sink.hw0:nokia-n950-twl4030-output-headset
flags = disable_notify

[device]
type  = headsetforcall
sink  = equals:sink.hw0
ports = sink.hw0:nokia-n950-twl4030-output-headset-call

[device]
type  = headsetforcall
source = equals:source.hw0
ports = source.hw0:nokia-n950-twl4030-input-headset

[device]
type  = headphone
sink  = equals:sink.headphone
ports = sink.hw0:nokia-n950-twl4030-output-headset
flags = disable_notify

[device]
type  = headphoneforcall
sink  = equals:sink.hw0
ports = sink.hw0:nokia-n950-twl4030-output-headset-call

[device]
type   = headmike
source = equals:source.hw0
ports = source.hw0:nokia-n950-twl4030-input-headset

[device]
type  = ihfandtvout
sink  = equals:sink.hw0
ports = sink.hw0:nokia-n950-twl4030-output-ihfandheadset

[device]
type  = tvout
sink  = equals:sink.headphone
ports = sink.hw0:nokia-n950-twl4030-output-headset

[device]
type  = earpieceandtvout
sink  = equals:sink.hw0
ports = sink.hw0:nokia-n950-twl4030-output-earpiece-nosidetone

[device]
type  = earpiece
sink  = equals:sink.hw0
ports = sink.hw0:nokia-n950-twl4030-output-earpiece

[device]
type  = hacandtvout
sink  = equals:sink.hw0
#ports = sink.hw0:nokia-n950-twl4030-output-hacandtvout

[device]
type  = hac
sink  = equals:sink.hw0
ports = sink.hw0:nokia-n950-twl4030-output-hac

[device]
type   = microphone
source = equals:source.hw0
ports = source.hw0:nokia-n950-twl4030-input-internal-microphones

[device]
type  = ihfandfmtx
sink  = equals:sink.hw0
ports = sink.hw0:nokia-n950-twl4030-output-ihf

[device]
type = fmtx
sink = equals:sink.hw0
# FIXME: Does fmtx mean that no output except FM TX is active? Is there an off port?
ports = sink.hw0:nokia-n950-twl4030-output-headset

[device]
type   = fmrx
source = equals:source.hw0

[device]
type  = ihf
sink  = equals:sink.hw0
ports = sink.hw0:nokia-n950-twl4030-output-ihf

[device]
type = null
sink = equals:sink.null

# -------- Stream section ------------------------------------------------------

[stream]
exe      = gst-launch-0.10
group    = player

[stream]
exe      = pacat
group    = player

[stream]
property = event.id@equals:"phone-incoming-call"
group    = ringtone

[stream]
property = event.id@equals:"alarm-clock-elapsed"
group    = alarm

[stream]
property = event.id@equals:"message-new-email"
group    = event

[stream]
exe      = ngfd
property = event.id@equals:"event-in-call"
group    = alwayson

[stream]
property = media.name@equals:"Battery Notification"
group    = alwayson

[stream]
property = media.name@equals:"Shutdown notification"
group    = alwayson

[stream]
property = media.role@equals:"dialog-question"
group    = systemsound

[stream]
property = media.role@equals:"dialog-information"
group    = systemsound

[stream]
property = media.role@equals:"dialog-warning"
group    = systemsound

[stream]
property = media.role@equals:"camera-sound-effect"
group    = camera

[stream]
property = event.id@equals:"pulldown_highlight"
group    = feedbacksound

[stream]
property = event.id@equals:"pulldown_lock"
group    = feedbacksound

[stream]
exe      = camera-ui
group    = camera

[stream]
exe   = telepathy-stream-engine
group = call

[stream]
property = application.process.arg0@equals:"/usr/lib/telepathy/telepathy-stream-engine"
group    = call

[stream]
exe   = vengine
group = call

[stream]
property = application.process.arg0@equals:"/usr/lib/skyhost/vengine"
group    = call

[stream]
exe   = voicehost
group = call

[stream]
property = application.process.arg0@equals:"/usr/lib/skyhost/voicehost"
group    = call

[stream]
property = media.name@equals:"indtone"
group    = cstone

[stream]
property = media.name@equals:"dtmf"
group    = cstone

[stream]
property = media.name@equals:"notiftone"
group    = nonsilent

[stream]
exe   = qmafw-dbus-wrapper
group = player

[stream]
property = event.id@equals:"ringtone-preview"
group    = player

[stream]
property = media.name@equals:"Flash Animation"
group    = flash

[stream]
property = media.name@equals:"Flash10 Stream"
group    = flash

[stream]
property = media.name@startswith:"fm."
group    = nonsilent

[stream]
name  = "AEP output from sink.hw0"
group = outgoing

[stream]
name = "Cellular call up link"
group = internal

[stream]
name = "Cellular call down link"
group = internal

[stream]
name  = "output of sink.voice"
group = internal

[stream]
name  = "EAP output from sink.music"
group = internal

[stream]
name  = "output of sink.music"
group = internal

[stream]
name  = "AEP output from sink.voice.raw"
group = internal

[stream]
name  = "output of source.record"
group = internal

[stream]
name  = "Simultaneous output on ALSA PCM on hw:n950twl4030 () via DMA"
group = internal

[stream]
name  = "Simultaneous output on ALSA PCM on hw:n950wl1273 () via DMA"
group = internal

[stream]
name  = "Voice module master sink input"
group = outgoing

[stream]
name  = "Voice module master source output"
group = incoming

[stream]
name  = "input of source.hw1"
group = incoming

[stream]
property = media.name@equals:"fm_loopback"
group    = fmradio

# -------- Context rule section ------------------------------------------------

[context-rule]
variable     = call_audio_type
value        = equals:none
set-property = sink-name@equals:"sink.hw0", property:"x-maemo.alsa_sink.buffers", value@constant:"primary"

[context-rule]
variable     = call_audio_type
value        = equals:cellular
set-property = sink-name@equals:"sink.hw0", property:"x-maemo.alsa_sink.buffers", value@constant:"alternative"

[context-rule]
variable     = call_audio_type
value        = equals:skype
set-property = sink-name@equals:"sink.hw0", property:"x-maemo.alsa_sink.buffers", value@constant:"primary"

[context-rule]
variable     = call_audio_type
value        = equals:gtalk
set-property = sink-name@equals:"sink.hw0", property:"x-maemo.alsa_sink.buffers", value@constant:"primary"

[context-rule]
variable     = call_audio_type
value        = equals:none
set-property = source-name@equals:"source.hw0", property:"x-maemo.alsa_source.buffers", value@constant:"primary"

[context-rule]
variable     = call_audio_type
value        = equals:cellular
set-property = source-name@equals:"source.hw0", property:"x-maemo.alsa_source.buffers", value@constant:"alternative"

[context-rule]
variable     = call_audio_type
value        = equals:skype
set-property = source-name@equals:"source.hw0", property:"x-maemo.alsa_source.buffers", value@constant:"primary"

[context-rule]
variable     = call_audio_type
value        = equals:gtalk
set-property = source-name@equals:"source.hw0", property:"x-maemo.alsa_source.buffers", value@constant:"primary"

[context-rule]
variable     = mode
value        = equals:telephony
set-property = module-name@equals:"module-bluetooth-discover", property:"bluetooth.hsp.auto.connect", value@constant:"true"

[context-rule]
variable     = mode
value        = matches:"^[^t].*"
set-property = module-name@equals:"module-bluetooth-discover", property:"bluetooth.hsp.auto.connect", value@constant:"false"
